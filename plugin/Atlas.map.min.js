/**
 * Atlas.map.js v0.3.0
 * https://github.com/steelydylan/Atlas.js
 * Copyright steelydylan
 * <ess_president@me.com>.
 * Released under the MIT license.
 * 参考 Gemmaの日記(http://d.hatena.ne.jp/Gemma/20070816)
 */
(function(){var g;var a;var c=8;function i(o,n){return o>n?o:n;}function e(o,n){return o<n?o:n;}var f=function(o,n){return ~~(Math.random()*(n-o+1))+o;
};function l(n){return Math.floor(n/2);}function j(o,q,n,p){this.x0=o;this.y0=q;this.x1=n;this.y1=p;}Array.prototype.flatten=function(s){var o=s||1,q=function(n){return n.reduce(function(t,r){return t.concat(r);
},[]);},p=q(this);for(;1<o--;){p=q(p);}return p;};function h(o){if((o.x1-o.x0<c*2)||(o.y1-o.y0<c*2)||(f(0,5)===0)){return[o];}else{if(f(0,2)===0){var n=f(o.y0+c,o.y1-c);
return[new j(o.x0,o.y0,o.x1,n),new j(o.x0,n,o.x1,o.y1)].map(h).flatten();}else{var n=f(o.x0+c,o.x1-c);return[new j(o.x0,o.y0,n,o.y1),new j(n,o.y0,o.x1,o.y1)].map(h).flatten();
}}}function k(n){var r=n.length;var u=[];for(var o=0;o<r;o++){do{var q=f(3,l(n[o].x1-n[o].x0)-1);var t=f(3,l(n[o].y1-n[o].y0)-1);var p=f(3,l(n[o].x1-n[o].x0)-1);
var s=f(3,l(n[o].y1-n[o].y0)-1);}while(((n[o].x1-p-(n[o].x0+q))/(n[o].y1-s-(n[o].y0+t))>2)||((n[o].y1-s-(n[o].y0+t))/(n[o].x1-p-(n[o].x0+q))>2));u.push(new j(n[o].x0+q,n[o].y0+t,n[o].x1-p,n[o].y1-s));
}return u;}function m(s){var q=e(s.y0,s.y1);var t=i(s.y0,s.y1);var r=e(s.x0,s.x1);var n=i(s.x0,s.x1);for(var o=q;o<=t;o++){for(var p=r;p<=n;p++){g[o][p]=1;
}}}function d(o){var n=o.length;for(var x=0;x<n;x++){var u=o[x];var q=e(u.y0,u.y1)-1;var v=i(u.y0,u.y1)+1;var s=e(u.x0,u.x1)-1;var w=i(u.x0,u.x1)+1;for(var p=q;
p<=v;p++){for(var r=s;r<=w;r++){if(p==q||p==v||r==s||r==w){g[p][r]=0;}else{g[p][r]=1;}}}}}function b(s,t){var n=new Array();var r=s.length-1;for(var q=0;
q<r;q++){n.push([q,q+1]);}for(var q=0;q<s.length;q++){for(var p=q+1;p<s.length;p++){if(f(0,5)==0){if(s[q].x0==s[p].x1||s[q].x1==s[p].x0||s[q].y0==s[p].y1||s[q].y1==s[p].y0){n.push([q,p]);
}}}}var o=function(z,y,x,w){if(z&&z.y1==y.y0){var v=f(x.x0,x.x1);var u=f(w.x0,w.x1);m(new j(v,l(z.y0+z.y1),v,z.y1));m(new j(u,l(y.y0+y.y1),u,y.y0));m(new j(v,z.y1,u,y.y0));
}else{if(z&&z.x1==y.x0){var v=f(x.y0,x.y1);var u=f(w.y0,w.y1);m(new j(l(x.x0+x.x1),v,z.x1,v));m(new j(l(w.x0+w.x1),u,y.x0,u));m(new j(z.x1,v,y.x0,u));}}};
for(var q in n){o(s[n[q][0]],s[n[q][1]],t[n[q][0]],t[n[q][1]]);}}Atlas.extendClass(Atlas.Map,{getRandMap:function(s,o,n){a=n;g=new Array(o);for(var q=0;
q<o;q++){g[q]=new Array(s);for(var r=0;r<s;r++){g[q][r]=0;}}var p=h(new j(0,0,s-1,o-1));var t=k(p);d(t);b(p,t);this.hitData=g;},});})();